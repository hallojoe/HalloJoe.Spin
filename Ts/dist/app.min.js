var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},SpinTexter;(function(n){var t=function(t){function i(i,r){r===void 0&&(r=0);t.call(this);this._rnd=i!=null?i:new n.Random(1e3);this._level=r}return __extends(i,t),i.prototype.toString=function(){if(this.length===0)return"";var n=this._rnd.nextInt(0,this.length-1);return this[n].toString()},i.prototype.toStructuredString=function(){var t=new n.StringBuilder,i=!0;return t.append("{"),this.forEach(function(n){i?i=!1:t.append("|");t.append(n.toStructuredString())}),t.append("}"),t.toString()},i.prototype.countVariants=function(){var n=1;return this.forEach(function(t){var i=t.countVariants();n<100100&&(n+=i)}),n},i.prototype.countMinWords=function(){var n=0;return this.forEach(function(t){var i=t.countMinWords();n===0&&(n=i);i<n&&(n=i)}),n},i.prototype.countMaxWords=function(){var n=0;return this.forEach(function(t){var i=t.countMinWords();n===0&&(n=i);i>n&&(n=i)}),n},i}(Array);n.AlternatedText=t})(SpinTexter||(SpinTexter={})),function(n){var t=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.toString=function(){var t=new n.StringBuilder;return this.forEach(function(n){t.append(n.toString())}),t.toString()},i.prototype.toStructuredString=function(){var t=new n.StringBuilder;return this.forEach(function(n){t.append(n.toStructuredString())}),t.toString()},i.prototype.toArrayString=function(){return this},i.prototype.countVariants=function(){var n=1;return this.forEach(function(t){var i=t.countVariants();n<i&&(n*=i)}),n},i.prototype.countMinWords=function(){var n=1;return this.forEach(function(t){n+=t.countMinWords()}),n},i.prototype.countMaxWords=function(){var n=1;return this.forEach(function(t){n+=t.countMaxWords()}),n},i}(Array);n.ConcatenetedText=t}(SpinTexter||(SpinTexter={})),function(n){var t=function(){function t(t){t===void 0&&(t=-1);this.opening="{";this.closing="}";this.delimiter="|";t<=0?this.reSeed():this._seed=t;this.random=new n.Random(this._seed)}return t.prototype.reSeed=function(){this._seed=Math.floor(Math.random()*99999)+11111},t}();n.ParserConfig=t}(SpinTexter||(SpinTexter={})),function(n){var t=function(){function n(n){this._seedStart=n;this._seed=this._seedStart;console.log(this._seedStart)}return n.prototype.next=function(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this._seed=(this._seedStart*9301+49297)%233281;var i=this._seed/233281;return n+i*(t-n+1)},n.prototype.nextInt=function(n,t){return Math.floor(this.next(n,t))},n.prototype.nextDouble=function(){return this.next(0,1)},n.prototype.pick=function(n){return n[this.nextInt(0,n.length-1)]},n}();n.Random=t}(SpinTexter||(SpinTexter={})),function(n){var t=function(){function t(n){this._wordsCount=-1;this._text=n}return t.prototype.WordsCount=function(){return this._wordsCount==-1?n.TextHelper.WordsCount(this._text):this._wordsCount},t.prototype.toString=function(){return this._text},t.prototype.toStructuredString=function(){return this._text},t.prototype.toArrayString=function(){return[this]},t.prototype.countVariants=function(){return 1},t.prototype.countMinWords=function(){return this.WordsCount()},t.prototype.countMaxWords=function(){return this.WordsCount()},t.Empty=function(){return new t("")},t}();n.SimpleText=t}(SpinTexter||(SpinTexter={})),function(n){var t=function(){function n(n){n===void 0&&(n="");this.append=function(n){n&&this._strings.push(n)};this.clear=function(){this._strings.length=1};this.toString=function(){return this._strings.join("")};this._strings=[];this.append(n)}return n}();n.StringBuilder=t}(SpinTexter||(SpinTexter={})),function(n){var t=function(){function n(){}return n.WordsCount=function(n){var t="["+this._seperators.join()+"]";return n.split(new RegExp(t,"g")).length},n._seperators=[" ",",",";",".","!",'"',"(",")","?"],n}();n.TextHelper=t}(SpinTexter||(SpinTexter={})),function(n){var t=function(){function t(n,i){this._part=t.ParsePart(n,0,n.length,i)}return t.ParsePart=function(i,r,u,f){var a;f===void 0&&(f=new n.ParserConfig(-1));for(var c=new n.AlternatedText(f.random),s=new n.ConcatenetedText,o=null,h=0,e=0,l=-1,e=r;e<=u-1;e++)if(i[e]===f.opening)h==0&&(o=i.substr(r,e-r),o!==null&&o!==""&&s.push(new n.SimpleText(o)),r=e+1,l=e),h+=1;else if(i[e]===f.delimiter&&h===0)o=i.substr(r,e-r),s.push(new n.SimpleText(o)),c.push(s),s=new n.ConcatenetedText,r=e+1;else if(i[e]===f.closing)if(h-=1,h===0)a=t.ParsePart(i,l+1,e,f),s.push(a),l=-1,r=e+1;else if(h<0)throw"Unexpected "+f.closing+" at position "+e.toString();if(h>0)throw f.opening+" at position "+l+" is unmatched";return(o=i.substr(r,e-r),o!==null&&o!==""&&s.push(new n.SimpleText(o)),c.length===0)?s:(c.push(s),c)},t.prototype.toString=function(){return this._part.toString()},t.prototype.toStructuredString=function(){return this._part.toStructuredString()},t.prototype.countVariants=function(){return this._part.countVariants()},t.prototype.countMinWords=function(){return this._part.countMinWords()},t.prototype.countMaxWords=function(){return this._part.countMaxWords()},t.Spin=function(i){return new t(i,new n.ParserConfig(-1)).toString()},t}();n.TextSpinner=t}(SpinTexter||(SpinTexter={}));